pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
player = {}
pnj_list = {}

function _init()
	player = new_player(0,0)
end

function _update()
	update_player(player)
end

function _draw()
	cls()
	draw_player(player)
end
-->8
function new_actor(ispr,x,y)
	local a = {}
	a.x = x
	a.y = y
	a.v = 1
	a.vspr = 0.5
	a.ispr = ispr
	a.spr = 1
	a.d = 1
	return a
end

function update_actor(a)
	--move
	if(btn(0) or btn(1) or btn(2) or btn(3))then
		a.spr+=a.vspr
		if(a.spr>=5) a.spr-=4
	else
		a.spr=1
	end
end

function draw_actor(a)
	if(a.d==0) spr(a.ispr*16+a.spr,a.x,a.y,1,1,true)
	if(a.d==1) spr(a.ispr*16+a.spr,a.x,a.y)
	if(a.d==2) spr(a.ispr*16+4+a.spr,a.x,a.y)
	if(a.d==3) spr(a.ispr*16+8+a.spr,a.x,a.y)
end
-->8
function new_player(x,y)
	return new_actor(2,x,y)
end

function update_player(p)
	--move up
	if(btn(2))then
		p.y-=p.v
		p.d = 2
	end
	--move down
	if(btn(3))then
		p.y+=p.v
		p.d = 3
	end
	--move left
	if(btn(0))then
		p.x-=p.v
		p.d = 0
	end
	--move right
	if(btn(1))then
		p.x+=p.v
		p.d = 1
	end
	update_actor(p)
end

function draw_player(p)
	draw_actor(p)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004444000044440000444400004444000044440000444400004444000044440000444400004444000044440000444400000000000000000000000000
007007000047f7000047f7000047f7000047f70000444400004444000044440000444400007ff700007ff700007ff700007ff70000008000000bbb0000009000
0007700000ffff0000ffff0000ffff0000ffff0000f44f0000f44f0000f44f0000f44f0000ffff0000ffff0000ffff0000ffff0000008000000bb00000099900
00077000044ff440044ff440044ff440044ff44004444440044444400444444004444440044ff440044ff440044ff440044ff440000080000000bb0000990990
007007000f4664f000f664000f4664f0f046640f0f4444f00f4444000f4444f0004444f00f4664f0004664f00f4664f00f46640000000000000bbb0000090900
00000000005555000055550000555500005555000055550000555500005555000055550000555500005555000055550000555500000080000000b00000099900
00000000005005000500005000500500000550000050050000000500005005000050000000500500005000000050050000000500000000000000000000000000
00000000004000000040000000400000004000000004400000044000000440000004400000044000000440000004400000044000000000000000000000000000
00000000044444000444440004444400044444000044440000444400004444000044440000444400004444000044440000444400000000000000000000000000
000ccc000047f7000047f7000047f7000047f70000444400004444000044440000444400007ff700007ff700007ff700007ff700000000000000000000000000
00000c0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff00000000000000000000000000
0000cc000f4ff4f00f4ff4f00f4ff4f00f4ff4f00f4444f00f4444f00f4444f00f4444f00f4ff4f00f4ff4f00f4ff4f00f4ff4f0000000000000000000000000
000000000f4664f000f664000f4664f0f046640f0f4444f00f4444000f4444f0004444f00f4664f0004664f00f4664f00f466400000000000000000000000000
0000c000005555000055550000555500005555000055550000555500005555000055550000555500005555000055550000555500000000000000000000000000
00000000005005000500005000500500000550000050050000000500005005000050000000500500005000000050050000000500000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff00000000000000000000000000
000000000447f7000447f7000447f7000447f70004444440044444400444444004444440047ff740047ff740047ff740047ff740000000000000000000000000
0000000000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff0000ffff00000000000000000000000000
00000000044ff440044ff440044ff440044ff44004444440044444400444444004444440044ff440044ff440044ff440044ff440000000000000000000000000
000000000f4444f000f444000f4444f0f044440f0f4444f00f4444000f4444f0004444f00f4444f0004444f00f4444f00f444400000000000000000000000000
00000000004444000044440000444400004444000044440000444400004444000044440000444400004444000044440000444400000000000000000000000000
00000000004444000444444000444400000440000044440000004400004444000044000000444400004400000044440000004400000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005555000055550000555500005555000055550000555500005555000055550000555500005555000055550000555500000000000000000000000000
00000000005747000057470000574700005747000055550000555500005555000055550000744700007447000074470000744700000000000000000000000000
00000000004444000044440000444400004444000045540000455400004554000045540000444400004444000044440000444400000000000000000000000000
000000000f5445f00f5445f00f5445f00f5445f00f5555f00f5555f00f5555f00f5555f00f5445f00f5445f00f5445f00f5445f0000000000000000000000000
00000000045ff540004ff500045ff540405ff50404555540045555000455554000555540045ff540005ff540045ff540045ff500000000000000000000000000
0000000000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd0000dddd00000000000000000000000000
0000000000d00d000d0000d000d00d00000dd00000d00d0000000d0000d00d0000d0000000d00d0000d0000000d00d0000000d00000000000000000000000000
